#!name = YoutubeMusic
#!desc = 屏蔽客户端广告
#!icon = https://cdn.pixabay.com/photo/2023/04/25/00/48/youtube-7949229_1280.png

[Argument]
blockUpload = switch, true, tag = 移除上传按钮
blockShorts = switch, true, tag = 移除短片按钮
blockImmersive = switch, true, tag = 移除选段按钮

[Rewrite]
^https:\/\/[\w-]+\.googlevideo\.com\/initplayback.+&oad mock-response-body data-type=text status-code=200

[Script]
http-response ^https:\/\/youtubei\.googleapis\.com\/(youtubei\/v1\/(browse|next|player|search|reel\/reel_watch_sequence|guide|account\/get_setting|get_watch))(\?(.*))?$ script-path=https://raw.githubusercontent.com/Maasea/sgmodule/master/Script/Youtube/youtube.response.js, requires-body=true, binary-body-mode=true, tag=广告处理, argument=[{blockUpload},{blockShorts},{blockImmersive}]

[MitM]
hostname = youtubei.googleapis.com,*.googlevideo.com
