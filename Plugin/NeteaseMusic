#!name = 网易云音乐
#!desc = 屏蔽客户端广告
#!icon = https://raw.githubusercontent.com/sooyaaabo/Loon/main/Icon/App-Icon/NeteaseMusic.png

[Argument]
FX = switch, true, false, tag = 移除发现
MY = switch, true, false, tag = 移除漫游
DT = switch, true, false, tag = 移除笔记
GZ = switch, true, false, tag = 移除关注

[Rewrite]
^https:\/\/(?:interface\d?)\.music\.163\.com\/e?api\/(?:batch|homepage\/block\/page|v\d\/(?:resource\/comment\/floor\/get|user\/detail\/\d+|discovery\/recommend\/songs|playlist\/detail)|link\/page\/rcmd\/(?:block\/resource\/multi\/refresh|resource\/show)|user\/follow\/users\/mixed\/get|link\/home\/framework\/tab|link\/position\/show\/resource|link\/page\/discovery\/resource\/show|mine\/(?:collect|rn)\/header\/info|vipnewcenter\/app\/resource\/newaccountpage|music-vip-membership\/(?:client|front)\/vip\/info|playlist\/privilege|search\/complex\/page) header-replace x-aeapi false
^https:\/\/(?:interface\d?)\.music\.163\.com\/(?:e?api|weapi)\/(?:delivery\/(?:batch-)?deliver|moment\/tab\/info|side-bar\/mini-program\/music-service\/account|yunbei\/account\/entrance|community\/friends\/fans-group\/artist\/group|mine\/applet\/redpoint|music\/songshare\/text\/recommend|resniche\/position\/play\/new|resniche\/tspopup\/show|resource\/comments?\/musiciansaid|user\/sub\/artist|ios\/version|mlivestream\/entrance\/playpage|link\/(?:position\/show\/strategy|scene\/show\/resource)|v1\/content\/exposure\/comment\/banner|activity\/bonus\/playpage\/time\/query|resource-exposure|search\/(?:chart|rcmd\/keyword|specialkeyword|default)|my\/podcast\/tab\/recommend|(?:ocpc\/)?ad) reject-200

[Script]
http-response ^https:\/\/(?:interface\d?)\.music\.163\.com\/eapi\/(?:batch|v2\/resource\/comment\/floor\/get|link\/position\/show\/resource|link\/page\/discovery\/resource\/show) script-path=https://raw.githubusercontent.com/Keywos/rule/main/script/wy/js/wyres.js, requires-body=true, binary-body-mode=true, tag=广告处理
http-response ^https:\/\/(?:interface\d?)\.music\.163\.com\/eapi\/(?:homepage\/block\/page|link\/page\/rcmd\/(?:block\/resource\/multi\/refresh|resource\/show)) script-path=https://raw.githubusercontent.com/Keywos/rule/main/script/wy/js/wyres.js, requires-body=true, binary-body-mode=true, tag=推荐处理
http-response ^https:\/\/(?:interface\d?)\.music\.163\.com\/eapi\/link\/home\/framework\/tab script-path=https://raw.githubusercontent.com/sooyaaabo/Loon/main/Script/NeteaseMusic/NeteaseMusicAds.js, requires-body=true, binary-body-mode=true, tag=底栏处理, argument=[{MY},{DT},{FX},{GZ}]

[MitM]
hostname = interface*.music.163.com
